# =============================================================================
# Enterprise RAG - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
RAG_ENV=development
DEBUG=true
LOG_LEVEL=INFO
SECRET_KEY=your-secret-key-change-in-production

# -----------------------------------------------------------------------------
# API Server
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=4
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql+asyncpg://rag:rag@localhost:5432/rag
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# Vector Store (Qdrant)
# -----------------------------------------------------------------------------
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=documents

# Alternative: Pinecone
# PINECONE_API_KEY=
# PINECONE_ENVIRONMENT=
# PINECONE_INDEX_NAME=

# Alternative: pgvector
# PGVECTOR_CONNECTION_STRING=postgresql://...

# -----------------------------------------------------------------------------
# Graph Database (Neo4j)
# -----------------------------------------------------------------------------
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# -----------------------------------------------------------------------------
# LLM Providers
# -----------------------------------------------------------------------------
# Anthropic (Claude)
ANTHROPIC_API_KEY=your-anthropic-api-key

# OpenAI
OPENAI_API_KEY=your-openai-api-key

# Default LLM settings
DEFAULT_LLM_PROVIDER=anthropic
DEFAULT_LLM_MODEL=claude-sonnet-4-20250514
LLM_TEMPERATURE=0.0
LLM_MAX_TOKENS=4096

# -----------------------------------------------------------------------------
# Embedding Providers
# -----------------------------------------------------------------------------
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=3072

# Alternative: Voyage
# VOYAGE_API_KEY=
# EMBEDDING_PROVIDER=voyage
# EMBEDDING_MODEL=voyage-large-2

# Alternative: Cohere
# COHERE_API_KEY=
# EMBEDDING_PROVIDER=cohere
# EMBEDDING_MODEL=embed-english-v3.0

# -----------------------------------------------------------------------------
# Reranking
# -----------------------------------------------------------------------------
RERANKER_PROVIDER=cohere
RERANKER_MODEL=rerank-english-v3.0
# COHERE_API_KEY=your-cohere-api-key

# -----------------------------------------------------------------------------
# Document Processing
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=50
CHUNK_SIZE=512
CHUNK_OVERLAP=50
SUPPORTED_FILE_TYPES=pdf,docx,txt,md,html,csv,xlsx

# -----------------------------------------------------------------------------
# Multi-Modal Processing
# -----------------------------------------------------------------------------
ENABLE_OCR=true
ENABLE_IMAGE_PROCESSING=true
ENABLE_AUDIO_PROCESSING=false
ENABLE_VIDEO_PROCESSING=false

# Vision LLM for image descriptions
VISION_LLM_PROVIDER=anthropic
VISION_LLM_MODEL=claude-sonnet-4-20250514

# Whisper for audio transcription
# WHISPER_MODEL=base

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
AGENT_MAX_ITERATIONS=3
AGENT_TIMEOUT_SECONDS=120
ENABLE_FACT_VERIFICATION=true
ENABLE_CRITIC_AGENT=true

# Agent-specific models (optional, defaults to DEFAULT_LLM_MODEL)
# PLANNER_MODEL=claude-sonnet-4-20250514
# SYNTHESIZER_MODEL=claude-sonnet-4-20250514
# VERIFIER_MODEL=claude-haiku-4-20250514
# CRITIC_MODEL=claude-sonnet-4-20250514

# -----------------------------------------------------------------------------
# Retrieval Settings
# -----------------------------------------------------------------------------
DEFAULT_TOP_K=10
RERANK_TOP_K=5
HYBRID_SEARCH_ALPHA=0.5
ENABLE_GRAPH_RETRIEVAL=true

# -----------------------------------------------------------------------------
# Celery (Task Queue)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TIMEOUT=3600

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
AUTH_ENABLED=false
AUTH_PROVIDER=none

# OAuth/OIDC
# AUTH_PROVIDER=oauth
# OAUTH_CLIENT_ID=
# OAUTH_CLIENT_SECRET=
# OAUTH_AUTHORIZE_URL=
# OAUTH_TOKEN_URL=
# OAUTH_USERINFO_URL=

# API Key authentication
# AUTH_PROVIDER=api_key
# API_KEY_HEADER=X-API-Key

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090

ENABLE_TRACING=true
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

SENTRY_DSN=

# -----------------------------------------------------------------------------
# Storage (S3-compatible)
# -----------------------------------------------------------------------------
S3_ENDPOINT_URL=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BUCKET_NAME=enterprise-rag-documents
S3_REGION=us-east-1

# Local storage fallback
LOCAL_STORAGE_PATH=./data/documents

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_TOKENS_PER_MINUTE=100000

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_MULTI_MODAL=false
FEATURE_KNOWLEDGE_GRAPH=true
FEATURE_MULTI_AGENT=true
FEATURE_STREAMING=true
